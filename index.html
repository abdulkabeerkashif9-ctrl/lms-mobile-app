<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://genex.thesmarterp.com https://www.youtube.com https://youtube.com https://www.youtube-nocookie.com https://googlevideo.com https://googleapis.com https://i.ytimg.com https://s.ytimg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self' 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:; media-src 'self' https: blob:; frame-src https://www.youtube-nocookie.com; connect-src 'self' https://genex.thesmarterp.com;">
    <meta name="theme-color" content="#16a34a">
    <title>LMS - Beta</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            -webkit-user-select: none !important;
            -moz-user-select: none !important;
            -ms-user-select: none !important;
            user-select: none !important;
        }
        * {
            -webkit-touch-callout: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen">
            <div class="loading-wrapper">
                <div class="spinner"></div>
                <p>Initializing Secure Session...</p>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen" class="screen hidden">
            <div class="login-container">
                <div class="login-header">
                    <div class="logo-wrapper">
                        <div class="logo-icon">ğŸ“ˆ</div>
                        <h1>Trader Abdullah Masood</h1>
                        <p></p>
                    </div>
                </div>
                
                <div class="login-card">
                    <div class="login-icon">ğŸ”</div>
                    <h2>Student Login</h2>
                    <p>Enter your credentials to access premium courses</p>
                    
                    <div class="error-message" id="loginError"></div>
                    
                    <form id="loginForm">
                        <div class="form-group">
                            <label>ğŸ“§ Email Address</label>
                            <input type="email" id="emailInput" placeholder="your.email@example.com" required autocomplete="email">
                        </div>
                        
                        <div class="form-group">
                            <label>ğŸ”’ Password</label>
                            <input type="password" id="passwordInput" placeholder="Enter your password" required autocomplete="current-password">
                        </div>
                        
                        <div class="form-group">
                            <label>ğŸ”‘ Private Key</label>
                            <input type="text" id="privateKeyInput" placeholder="Enter your private key" required autocomplete="off">
                            <span class="input-hint">âš ï¸ This key can only be used once</span>
                        </div>
                        
                        <button type="submit" class="login-btn" id="loginBtn">Verify & Login</button>
                    </form>
                </div>
                
                <div class="security-notice">
                    <div class="notice-icon">ğŸ›¡ï¸</div>
                    <p><strong>Privacy Protected:</strong> Screenshots and screen recording are blocked for security.</p>
                </div>
            </div>
        </div>

        <!-- Main Screen -->
        <div id="mainScreen" class="screen hidden">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="header-logo">ğŸ“ˆ</div>
                    <div class="header-text">
                        <h1>LMS</h1>
                        <span class="header-subtitle">Learning Platform</span>
                    </div>
                </div>
                <div class="user-badge">
                    <div class="user-avatar" id="studentInitials">ST</div>
                    <div class="user-info">
                        <div class="user-name" id="studentName">Student</div>
                        <div class="user-status">Premium Member</div>
                    </div>
                </div>
            </header>

            <!-- Course List -->
            <div id="courseList" class="content">
                <div class="loading hidden" id="loadingCourses">
                    <div class="spinner"></div>
                    <p>Loading your courses...</p>
                </div>
                
                <div class="courses-grid" id="coursesGrid"></div>
                
                <div class="no-content hidden" id="noCourses">
                    <div class="no-content-icon">ğŸ“š</div>
                    <h3>No Courses Available</h3>
                    <p>You don't have access to any courses yet.</p>
                </div>
            </div>

            <!-- Video List Screen -->
            <div id="videoListScreen" class="screen hidden">
                <div class="content">
                    <div class="back-header">
                        <button class="back-btn" onclick="backToCourses()">â† Back</button>
                        <button id="liveClassBtn" class="live-class-btn hidden" onclick="showLiveClassModal()">
                            <span class="live-indicator">ğŸ”´</span>
                            <span>Live Class</span>
                        </button>
                        <div class="page-title">
                            <span id="courseTitleIcon">ğŸ“š</span>
                            <h2 id="courseTitle">Course Videos</h2>
                        </div>
                    </div>
                    
                    <div class="loading hidden" id="loadingVideos">
                        <div class="spinner"></div>
                        <p>Loading videos...</p>
                    </div>
                    
                    <div class="videos-list" id="videosList"></div>
                    
                    <div class="no-content hidden" id="noVideos">
                        <div class="no-content-icon">ğŸ“¹</div>
                        <h3>No Videos Available</h3>
                        <p>This course doesn't have any videos yet.</p>
                    </div>
                </div>
            </div>

            <!-- Video Loading Screen -->
            <div id="videoLoadingScreen" class="screen hidden">
                <div class="loading-wrapper">
                    <div class="spinner"></div>
                    <h3>Preparing Video...</h3>
                    <p>Setting up secure playback</p>
                </div>
            </div>

            <!-- Video Player Screen -->
            <div id="videoPlayer" class="screen hidden">
                <!-- Video Header -->
                <div class="video-header">
                    <button class="back-btn" onclick="backToVideos()">â† Back</button>
                    <h3 id="currentVideoTitle">Video Title</h3>
                </div>

                <!-- Video Container with 3-dot button -->
                <div class="video-container">
                    <iframe 
                        id="videoFrame" 
                        class="video-iframe" 
                        frameborder="0" 
                        allow="autoplay; encrypted-media" 
                        referrerpolicy="strict-origin-when-cross-origin"
                        sandbox="allow-scripts allow-same-origin"
                        loading="lazy"
                    ></iframe>
                    <div class="watermark-overlay" id="watermarkOverlay"></div>
                    <!-- 3-dot button overlay -->
                    <button id="tam-dots-btn" class="tam-dots-btn hidden" aria-label="More options" title="More options">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <circle cx="12" cy="5" r="2"/>
                            <circle cx="12" cy="12" r="2"/>
                            <circle cx="12" cy="19" r="2"/>
                        </svg>
                    </button>
                </div>

                <!-- Video Info -->
                <div class="video-info">
                    <div class="video-meta">
                        <div class="video-badge" id="videoProgress">Video 1 of 1</div>
                    </div>
                </div>

                <!-- Playlist -->
                <div class="playlist-section">
                    <div class="playlist-header">
                        <h4>ğŸ“š Course Videos</h4>
                        <span id="playlistCount">0 videos</span>
                    </div>
                    <div class="playlist-content">
                        <div id="playlistVideos"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Live Class Modal -->
    <div id="liveClassModal" class="modal hidden">
        <div class="modal-overlay" onclick="closeLiveClassModal()"></div>
        <div class="modal-content">
            <button class="modal-close" onclick="closeLiveClassModal()">Ã—</button>
            <div class="modal-header">
                <span class="live-indicator-large">ğŸ”´</span>
                <h3>Live Class Session</h3>
            </div>
            <div class="modal-body">
                <p>Join the live class using the link below:</p>
                <div class="live-class-link-container">
                    <input type="text" id="liveClassLink" readonly onclick="this.select()">
                    <button class="copy-btn" onclick="copyLiveClassLink()">
                        <span id="copyBtnText">ğŸ“‹ Copy</span>
                    </button>
                </div>
                <button class="join-btn" onclick="openLiveClassLink()">
                    ğŸš€ Open Live Class
                </button>
            </div>
        </div>
    </div>

    <script type="module" src="./app.js"></script>
</body>
</html>